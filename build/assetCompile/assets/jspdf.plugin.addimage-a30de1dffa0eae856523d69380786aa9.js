//# sourceMappingURL=jspdf.plugin.addimage.js.map
/*
 
jsPDF addImage plugin (JPEG only at this time)
Copyright (c) 2012 https://github.com/siefkenj/
*/
(function(n){var p=function(){var b=this.internal.collections.addImage_images,e;for(e in b){var c=b[e],l=this.internal.newObject(),d=this.internal.write,g=this.internal.putStream;c.n=l;d("<</Type /XObject");d("/Subtype /Image");d("/Width "+c.w);d("/Height "+c.h);"Indexed"===c.cs?d("/ColorSpace [/Indexed /DeviceRGB "+(c.pal.length/3-1)+" "+(l+1)+" 0 R]"):(d("/ColorSpace /"+c.cs),"DeviceCMYK"===c.cs&&d("/Decode [1 0 1 0 1 0 1 0]"));d("/BitsPerComponent "+c.bpc);"f"in c&&d("/Filter /"+c.f);"dp"in c&&
d("/DecodeParms <<"+c.dp+">>");if("trns"in c&&c.trns.constructor==Array)for(var k="",h=0;h<c.trns.length;h++)k+=c[k][h]+" "+c.trns[h]+" ",d("/Mask ["+k+"]");"smask"in c&&d("/SMask "+(l+1)+" 0 R");d("/Length "+c.data.length+">>");g(c.data);d("endobj")}},q=function(){var b=this.internal.collections.addImage_images,e=this.internal.write,c,l;for(l in b)c=b[l],e("/I"+c.i,c.n,"0","R")};n.addImage=function(b,e,c,l,d,g){if("object"===typeof b&&1===b.nodeType){e=document.createElement("canvas");e.width=b.clientWidth;
e.height=b.clientHeight;var k=e.getContext("2d");if(!k)throw"addImage requires canvas to be supported by browser.";k.drawImage(b,0,0,e.width,e.height);b=e.toDataURL("image/jpeg");e="JPEG"}if("JPEG"!==e.toUpperCase())throw Error("addImage currently only supports format 'JPEG', not '"+e+"'");var h;e=this.internal.collections.addImage_images;var k=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString;"data:image/jpeg;base64,"===b.substring(0,23)&&(b=atob(b.replace("data:image/jpeg;base64,",
"")));if(e)if(Object.keys)h=Object.keys(e).length;else{var a=e,f=0;for(h in a)a.hasOwnProperty(h)&&f++;h=f}else h=0,this.internal.collections.addImage_images=e={},this.internal.events.subscribe("putResources",p),this.internal.events.subscribe("putXobjectDict",q);a:{var a=b,m;if(255===!a.charCodeAt(0)||216===!a.charCodeAt(1)||255===!a.charCodeAt(2)||224===!a.charCodeAt(3)||74===!a.charCodeAt(6)||70===!a.charCodeAt(7)||73===!a.charCodeAt(8)||70===!a.charCodeAt(9)||0===!a.charCodeAt(10))throw Error("getJpegSize requires a binary jpeg file");
m=256*a.charCodeAt(4)+a.charCodeAt(5);for(var f=4,r=a.length;f<r;){f+=m;if(255!==a.charCodeAt(f))throw Error("getJpegSize could not find the size of the image");if(192===a.charCodeAt(f+1)){m=256*a.charCodeAt(f+5)+a.charCodeAt(f+6);a=256*a.charCodeAt(f+7)+a.charCodeAt(f+8);a=[a,m];break a}f+=2;m=256*a.charCodeAt(f)+a.charCodeAt(f+1)}a=void 0}b={w:a[0],h:a[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:h,data:b};e[h]=b;d||g||(g=d=-96);0>d&&(d=-72*b.w/d/this.internal.scaleFactor);0>g&&(g=-72*b.h/g/this.internal.scaleFactor);
0===d&&(d=g*b.w/b.h);0===g&&(g=d*b.h/b.w);this.internal.write("q",k(d),"0 0",k(g),k(c),n(l+g),"cm /I"+b.i,"Do Q");return this}})(jsPDF.API);